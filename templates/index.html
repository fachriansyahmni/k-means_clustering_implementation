<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>K-Means Clustering</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>
  <!-- form cluster -->
  <div class="container">
    <div class="row h-100">
      <div class="col-md-6">
        <h1>Segmentasi Customer dengan K-Means Clustering</h1>
        <p>Studi Kasus: Perusahaan retail online, dengan rentang waktu periode 1 Desember 2010 sampai dengan tanggal 9
          Desember 2011</p>
        <form action="http://localhost:5000/cluster" method="POST" target="frame_result">
          <div class="mb-3">
            <label for="cluster" class="form-label">Jumlah Cluster</label>
            <input type="number" class="form-control" id="cluster" name="cluster_number"
              placeholder="Masukkan jumlah cluster">
          </div>
          <button type="submit" id="btn-result" class="btn btn-primary" onclick="showLoading()">Tampil Hasil</button>
        </form>
      </div>
    </div>
  </div>

  <!-- iframe -->
  <div class="container">
    <div class="row min-vh-100">
      <div class="col-md-12">
        <iframe name="frame_result" src="" frameborder="0" width="100%" height="100%"></iframe>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script>
      // function loadResult() {
      //   showLoading();
      //   let frame = $('iframe');
      //   let src = frame.data('src');
      //   frame.attr('src', src);
      // }

      function showLoading() {
        let element = $('#btn-result');
        // disable
        // element.prop('disabled', true);
        element.html(`  
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>`);
        resetIframe()
      }

      function resetIframe() {
        let frame = $('iframe');
        frame.contents().find("body").html("");
      }

      function hideLoading() {
        let element = $('#btn-result');
        // enable
        // element.prop('disabled', false);
        element.html('Tampil Hasil');
      }

      $('iframe').on('load', function () {
        hideLoading();
      });
    </script>
</body>

</html>